# Database
# When container joins m3w_default network, use container service names
# Otherwise use host.containers.internal to access host services
DATABASE_URL=postgresql://postgres:postgres@m3w-postgres:5432/m3w?schema=public

# MinIO (S3-compatible storage)
MINIO_ENDPOINT=m3w-minio
MINIO_PORT=9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_USE_SSL=false
MINIO_BUCKET_NAME=m3w-music

# JWT Authentication
JWT_SECRET=your-secret-key-here-replace-in-production
JWT_ACCESS_EXPIRY=6h
JWT_REFRESH_EXPIRY=90d

# GitHub OAuth
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GITHUB_CALLBACK_URL=http://localhost:4000/api/auth/callback

# Server Configuration
PORT=4000
HOST=0.0.0.0
# For AIO mode, CORS_ORIGIN should match the container's exposed port
CORS_ORIGIN=http://localhost:4000
API_BASE_URL=http://localhost:4000

# Multi-Region Configuration
# HOME_REGION: Region identifier for this backend instance
# - "jp" (Japan), "sea" (Southeast Asia), "usw" (US West), or "default" for AIO
# - Used for cross-region user routing and duplicate prevention
HOME_REGION=default

# Redis (optional - only required for multi-region deployments)
# - Leave empty for local development or AIO deployments
# - Use service name when running in m3w_default network
# - Required for cross-region duplicate prevention
# REDIS_URL=redis://m3w-redis:6379

# Node Environment
NODE_ENV=production

# Proxy (for GitHub API access in China)
# Uncomment and adjust port if needed
# HTTP_PROXY=http://host.containers.internal:7890
# HTTPS_PROXY=http://host.containers.internal:7890

# ============================================
# Demo Mode - Two-Layer Control System
# ============================================
#
# Note: .env.docker is for containerized deployments
# BUILD_TARGET is controlled by the Docker build process, not set here
#
# DEMO_MODE (Feature Activation - Runtime)
#   Controls whether demo features are active in the running container
#   
#   Values:
#     'true'  - Activate demo features (storage limit, banner, reset)
#     'false' - Demo code loaded but features inactive (default)
#   
#   Requirement: Only works with RC builds (BUILD_TARGET=rc during build)
#   
#   For production builds, DEMO_MODE has no effect (demo code not present)
#
# ============================================

# Runtime: Activate demo features?
# Set to 'true' for demo/RC deployments, 'false' for production-like RC deployments
DEMO_MODE=false

# Maximum storage limit in bytes (5GB)
DEMO_STORAGE_LIMIT=5368709120

# Enable automatic hourly data reset
# WARNING: This will delete ALL data every hour
# Only use in pure demo environments
DEMO_RESET_ENABLED=false
