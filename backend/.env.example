# Database
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/m3w?schema=public

# MinIO (S3-compatible storage)
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_USE_SSL=false
MINIO_BUCKET_NAME=m3w-music

# JWT Authentication
# run `node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"` to generate a secure secret
JWT_SECRET=your-secret-key-here-replace-in-production
JWT_ACCESS_EXPIRY=6h
JWT_REFRESH_EXPIRY=90d

# GitHub OAuth
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GITHUB_CALLBACK_URL=http://localhost:4000/api/auth/callback

# Server Configuration
PORT=4000
HOST=0.0.0.0
CORS_ORIGIN=http://localhost:3000
# Base URL exposed to clients (cover URLs, streaming endpoints, etc.)
API_BASE_URL=http://localhost:4000

# Multi-Region Configuration
# HOME_REGION: Region identifier for this backend instance
# - "jp" (Japan), "sea" (Southeast Asia), "usw" (US West), or "default" for AIO
# - Used for cross-region user routing and duplicate prevention
HOME_REGION=default

# COOKIE_DOMAIN: Wildcard domain for auth cookies in multi-region
# - Production: ".m3w.test3207.fun" (note the leading dot for wildcard)
# - Local dev: leave empty (cookie bound to request domain)
# - This allows cookies to work across jp.m3w.test3207.fun, sea.m3w.test3207.fun, etc.
COOKIE_DOMAIN=

# REDIS_URL: Redis connection for multi-region user routing
# 
# When to use:
# - Strongly recommended: Multi-region deployment (HOME_REGION != "default")
#   - Prevents duplicate user registration across regions
#   - Maps GitHub user ID to home region
#   - Without Redis, multi-region operates with graceful degradation (less safe)
# 
# - Not needed: Single-region or local development (HOME_REGION = "default")
#   - Graceful degradation: app works without Redis
#   - No cross-region checks needed
# 
# Security (production):
# - Use password/TLS: redis://:password@host:6379 or rediss://...
# 
# Example (matches docker-compose.yml for local dev):
# REDIS_URL=redis://localhost:6379

# Node Environment
NODE_ENV=development

# Proxy Configuration (for GitHub API access)
# Uncomment these lines if you need to use a proxy to access GitHub
# HTTP_PROXY=http://127.0.0.1:7890
# HTTPS_PROXY=http://127.0.0.1:7890

# ============================================
# Demo Mode Configuration
# ============================================
#
# Demo mode provides storage limits, user banner, and optional data reset
# for RC (release candidate) builds and demo deployments.
#
# In development:
#   - Demo code is always loaded (for testing)
#   - Set DEMO_MODE=true to activate demo features
#   - Set DEMO_MODE=false to keep features inactive (default)
#
# In production builds:
#   - npm run build:prod removes ALL demo code (~8KB smaller)
#   - DEMO_MODE has no effect (demo code not present)
#
# In RC builds:
#   - npm run build:rc includes demo code
#   - Set DEMO_MODE=true at runtime to activate features
#
# ============================================

# Activate demo features (storage limit, banner, hourly reset)?
# Values: 'true' (active) | 'false' (inactive, default)
DEMO_MODE=false

# Maximum storage limit in bytes (default: 5GB)
DEMO_STORAGE_LIMIT=5368709120

# Enable automatic hourly data reset (⚠️ DESTRUCTIVE)
# Only use in pure demo environments
DEMO_RESET_ENABLED=false
